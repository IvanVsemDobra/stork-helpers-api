{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/OnboardingForm/OnboardingForm.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"arrow\": \"OnboardingForm-module__b_ayhW__arrow\",\n  \"avatar\": \"OnboardingForm-module__b_ayhW__avatar\",\n  \"avatarImage\": \"OnboardingForm-module__b_ayhW__avatarImage\",\n  \"dropdown\": \"OnboardingForm-module__b_ayhW__dropdown\",\n  \"dropdownItem\": \"OnboardingForm-module__b_ayhW__dropdownItem\",\n  \"dropdownMenu\": \"OnboardingForm-module__b_ayhW__dropdownMenu\",\n  \"dropdownTrigger\": \"OnboardingForm-module__b_ayhW__dropdownTrigger\",\n  \"error\": \"OnboardingForm-module__b_ayhW__error\",\n  \"fieldGroup\": \"OnboardingForm-module__b_ayhW__fieldGroup\",\n  \"fields\": \"OnboardingForm-module__b_ayhW__fields\",\n  \"filled\": \"OnboardingForm-module__b_ayhW__filled\",\n  \"form\": \"OnboardingForm-module__b_ayhW__form\",\n  \"input\": \"OnboardingForm-module__b_ayhW__input\",\n  \"label\": \"OnboardingForm-module__b_ayhW__label\",\n  \"placeholder\": \"OnboardingForm-module__b_ayhW__placeholder\",\n  \"submitButton\": \"OnboardingForm-module__b_ayhW__submitButton\",\n  \"submitWrapper\": \"OnboardingForm-module__b_ayhW__submitWrapper\",\n  \"uploadButton\": \"OnboardingForm-module__b_ayhW__uploadButton\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/OneDrive/Desktop/OnboardingPage/lib/validation/onboarding.schema.ts"],"sourcesContent":["import * as Yup from 'yup'\r\n\r\nexport const onboardingSchema = Yup.object({\r\n  name: Yup.string().required('Імʼя обовʼязкове'),\r\n  birthDate: Yup.date().required('Дата народження обовʼязкова'),\r\n  gender: Yup.string().required('Стать обовʼязкова'),\r\n  avatar: Yup.mixed().required('Аватар обовʼязковий')\r\n})"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,mBAAmB,gJAAU,CAAC;IACzC,MAAM,gJAAU,GAAG,QAAQ,CAAC;IAC5B,WAAW,8IAAQ,GAAG,QAAQ,CAAC;IAC/B,QAAQ,gJAAU,GAAG,QAAQ,CAAC;IAC9B,QAAQ,+IAAS,GAAG,QAAQ,CAAC;AAC/B"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/OneDrive/Desktop/OnboardingPage/lib/api/onboarding.ts"],"sourcesContent":["export async function submitOnboarding(data: FormData) {\r\n  const res = await fetch('/api/onboarding', {\r\n    method: 'POST',\r\n    body: data,\r\n  })\r\n\r\n  if (!res.ok) {\r\n    const error = await res.json()\r\n    throw new Error(error.message || 'Помилка запиту')\r\n  }\r\n\r\n  return res.json()\r\n}"],"names":[],"mappings":";;;;AAAO,eAAe,iBAAiB,IAAc;IACnD,MAAM,MAAM,MAAM,MAAM,mBAAmB;QACzC,QAAQ;QACR,MAAM;IACR;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI;QAC5B,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/OneDrive/Desktop/OnboardingPage/components/OnboardingForm/OnboardingForm.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useRef } from 'react'\r\nimport { Formik, Form, Field, ErrorMessage, useFormikContext } from 'formik'\r\nimport { useMutation } from '@tanstack/react-query'\r\nimport toast from 'react-hot-toast'\r\nimport { useRouter } from 'next/navigation'\r\nimport styles from './OnboardingForm.module.css'\r\n\r\nimport { onboardingSchema } from '@/lib/validation/onboarding.schema'\r\nimport { submitOnboarding } from '@/lib/api/onboarding'\r\n\r\ninterface OnboardingFormValues {\r\n  name: string\r\n  birthDate: string\r\n  gender: string\r\n  avatar: File | null\r\n}\r\n\r\nfunction AvatarPreview({\r\n  defaultAvatar,\r\n  setPreview,\r\n}: {\r\n  defaultAvatar: string\r\n  setPreview: (src: string) => void\r\n}) {\r\n  const { values } = useFormikContext<OnboardingFormValues>()\r\n\r\n  useEffect(() => {\r\n    if (values.avatar) {\r\n      const url = URL.createObjectURL(values.avatar)\r\n      setPreview(url)\r\n      return () => URL.revokeObjectURL(url)\r\n    }\r\n    setPreview(defaultAvatar)\r\n  }, [values.avatar, defaultAvatar, setPreview])\r\n\r\n  return null\r\n}\r\n\r\nfunction GenderDropdown({\r\n  value,\r\n  setFieldValue,\r\n}: {\r\n  value: string\r\n  setFieldValue: (field: string, value: string) => void\r\n}) {\r\n  const [open, setOpen] = useState(false)\r\n  const ref = useRef<HTMLDivElement>(null)\r\n\r\n  const options = [\r\n    { value: 'male', label: 'Хлопчик' },\r\n    { value: 'female', label: 'Дівчинка' },\r\n    { value: 'unknown', label: 'Ще не знаю' },\r\n  ]\r\n\r\n  const selected = options.find(o => o.value === value)\r\n\r\n  useEffect(() => {\r\n    const handler = (e: MouseEvent) => {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setOpen(false)\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handler)\r\n    return () => document.removeEventListener('mousedown', handler)\r\n  }, [])\r\n\r\n  return (\r\n    <div ref={ref} className={styles.dropdown}>\r\n      <button\r\n        type=\"button\"\r\n        className={`${styles.dropdownTrigger} ${\r\n          value ? styles.filled : styles.placeholder\r\n        }`}\r\n        onClick={() => setOpen(prev => !prev)}\r\n      >\r\n        {selected ? selected.label : 'Оберіть стать'}\r\n        <svg className={styles.arrow} viewBox=\"0 0 24 24\">\r\n          <path d=\"M7 10l5 5 5-5z\" />\r\n        </svg>\r\n      </button>\r\n\r\n      {open && (\r\n        <div className={styles.dropdownMenu}>\r\n          {options.map(option => (\r\n            <div\r\n              key={option.value}\r\n              className={styles.dropdownItem}\r\n              onClick={() => {\r\n                setFieldValue('gender', option.value)\r\n                setOpen(false)\r\n              }}\r\n            >\r\n              {option.label}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function OnboardingForm() {\r\n  const router = useRouter()\r\n  const defaultAvatar = '/images/avatar-image.svg'\r\n  const [preview, setPreview] = useState(defaultAvatar)\r\n\r\n  const mutation = useMutation({\r\n    mutationFn: (formData: FormData) => submitOnboarding(formData),\r\n    onSuccess: () => {\r\n      toast.success('Форма успішно надіслана!')\r\n      router.push('/')\r\n    },\r\n    onError: (err: Error) =>\r\n      toast.error(err.message || 'Помилка при відправці'),\r\n  })\r\n\r\n  const handleDateChange = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    setFieldValue: (field: string, value: string) => void\r\n  ) => {\r\n    let val = e.target.value.replace(/\\D/g, '')\r\n    if (val.length > 2 && val.length <= 4) val = val.slice(0, 2) + '.' + val.slice(2)\r\n    if (val.length > 4) val = val.slice(0, 5) + '.' + val.slice(5, 9)\r\n    setFieldValue('birthDate', val)\r\n  }\r\n\r\n  return (\r\n    <Formik<OnboardingFormValues>\r\n      initialValues={{\r\n        name: '',\r\n        birthDate: '',\r\n        gender: '',\r\n        avatar: null,\r\n      }}\r\n      validationSchema={onboardingSchema}\r\n      onSubmit={(values) => {\r\n        const formData = new FormData()\r\n        formData.append('name', values.name)\r\n        formData.append('birthDate', values.birthDate)\r\n        formData.append('gender', values.gender)\r\n        if (values.avatar) formData.append('avatar', values.avatar)\r\n        mutation.mutate(formData)\r\n      }}\r\n    >\r\n      {({ setFieldValue, values }) => (\r\n        <>\r\n          <Form className={styles.form}>\r\n            <AvatarPreview defaultAvatar={defaultAvatar} setPreview={setPreview} />\r\n\r\n            <div className={styles.avatar}>\r\n              <img src={preview} alt=\"Avatar\" className={styles.avatarImage} />\r\n              <label className={styles.uploadLabel}>\r\n                <span className={styles.uploadButton}>Завантажити фото</span>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  hidden\r\n                  onChange={(e) =>\r\n                    setFieldValue('avatar', e.currentTarget.files?.[0] || null)\r\n                  }\r\n                />\r\n              </label>\r\n            </div>\r\n\r\n            <div className={styles.fields}>\r\n              <div className={styles.fieldGroup}>\r\n                <label className={styles.label}>Стать дитини</label>\r\n                <GenderDropdown\r\n                  value={values.gender}\r\n                  setFieldValue={setFieldValue}\r\n                />\r\n                <ErrorMessage name=\"gender\" component=\"div\" className={styles.error} />\r\n              </div>\r\n\r\n              <div className={styles.fieldGroup}>\r\n                <label className={styles.label}>Планова дата пологів</label>\r\n                <Field\r\n                  type=\"text\"\r\n                  name=\"birthDate\"\r\n                  placeholder=\"16.07.2025\"\r\n                  className={styles.input}\r\n                  maxLength={10}\r\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n                    handleDateChange(e, setFieldValue)\r\n                  }\r\n                />\r\n                <ErrorMessage name=\"birthDate\" component=\"div\" className={styles.error} />\r\n              </div>\r\n            </div>\r\n          </Form>\r\n\r\n          <div className={styles.submitWrapper}>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={mutation.isPending}\r\n              className={styles.submitButton}\r\n              onClick={() => document.querySelector('form')?.requestSubmit()}\r\n            >\r\n              {mutation.isPending ? 'Відправка…' : 'Зберегти'}\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </Formik>\r\n  )\r\n}"],"names":[],"mappings":"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"}}]
}